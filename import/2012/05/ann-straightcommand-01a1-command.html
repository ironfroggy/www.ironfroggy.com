<h2><data:post.title><span style="font-family: Verdana,sans-serif;">New Project Announcement:</span></data:post.title></h2><data:post.title>I'd like to announce a new project, based on straight.plugin, a command framework that provides a declarative way to define command-line options, sub-commands, and allows plugins from third-parties to expand commands.</data:post.title><br /><data:post.title><br /></data:post.title><br /><data:post.title>This is all very early, I'm calling this version 0.1a1 and lots of things are missing, but here is an example (which works) of a small todo application built with this.</data:post.title><br /><data:post.title><br /></data:post.title><br /><pre style="background-color: #fff2cc; padding: 20px;"><span class="c">#!/usr/bin/env python</span><br /><br /><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><br /><span class="kn">import</span> <span class="nn">sys</span><br /><span class="kn">from</span> <span class="nn">straight.command</span> <span class="kn">import</span> <span class="n">Command</span><span class="p">,</span> <span class="n">Option</span><span class="p">,</span> <span class="n">SubCommand</span><br /><br /><span class="k">class</span> <span class="nc">List</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span><br />    <span class="k">def</span> <span class="nf">run_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">extra</span><span class="p">):</span><br />        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s">'filename'</span><span class="p">]):</span><br />            <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">))</span><br /><br /><span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span><br />    <span class="n">new_todo</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="s">'new_todo'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">'append'</span><span class="p">)</span><br /><br />    <span class="k">def</span> <span class="nf">run_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_todo</span><span class="p">,</span> <span class="o">**</span><span class="n">extra</span><span class="p">):</span><br />        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s">'filename'</span><span class="p">],</span> <span class="s">'a'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span><br />            <span class="k">for</span> <span class="n">one_todo</span> <span class="ow">in</span> <span class="n">new_todo</span><span class="p">:</span><br />                <span class="k">print</span><span class="p">(</span><span class="n">one_todo</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span><br /><br /><span class="k">class</span> <span class="nc">Todo</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span><br />    <span class="n">filename</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="s">'filename'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">'store'</span><span class="p">)</span><br /><br />    <span class="nb">list</span> <span class="o">=</span> <span class="n">SubCommand</span><span class="p">(</span><span class="s">'list'</span><span class="p">,</span> <span class="n">List</span><span class="p">)</span><br />    <span class="n">add</span> <span class="o">=</span> <span class="n">SubCommand</span><span class="p">(</span><span class="s">'add'</span><span class="p">,</span> <span class="n">Add</span><span class="p">)</span><br /><br /><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span><br />    <span class="n">Todo</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span></pre><br />And a sample of the result of this little script:<br /><br /><pre style="background-color: #fff2cc; padding: 20px;">$ ./todo.py todo.txt add "Write an example tool"<br />$ ./todo.py todo.txt add "Get the documentation cleaned up and on readthedocs"<br />$ ./todo.py todo.txt add "Blog about the project"<br />$ ./todo.py todo.txt list<br />Write an example tool<br />Get the documentation cleaned up and on readthedocs<br />Blog about the project<br /></pre><br />The <a href="http://straightcommand.readthedocs.org/">documentation</a> and <a href="https://github.com/ironfroggy/straight.command">source</a> are both available now.