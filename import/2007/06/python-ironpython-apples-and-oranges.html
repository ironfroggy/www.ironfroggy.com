While Fuzzyman is over at the <a href="http://www.voidspace.org.uk/">voidspace</a>, talking about how great it is that, in IronPython, <a href="http://www.voidspace.org.uk/python/weblog/arch_d7_2007_06_09.shtml#e740">str and unicode are the same things</a>, I'm over here getting more worried every day about the segmentation of Python and IronPython.<br /><span style="font-style: italic;" id="ctl00_ctl00_ctl00_Content_ProjectBaseMain_ProjectMain_wikiSourceLabel"><blockquote>IronPython is a new implementation of the Python ... maintaining full compatibility with the Python language.</blockquote></span><div style="text-align: right;"><span style="font-style: italic;"><span style="font-size:78%;">From the <a href="http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython">IronPython homepage</a>.<br /></span></span><div style="text-align: left;"><br />They should go ahead and drop that last qualify. I want to make something very clear, and that is that I absolutely hate writing this post. The IronPython project is really great, and I've been impressed by what it has done, and my Microsoft's embrace of the language. Admiration does not trump worry, in this case. A number of issues make IronPython simply <span style="font-style: italic;">not</span> Python. I've been advocating this issue more and more recently, so it is about time I wrote at a moderate length about the issue.<br /><br /><span style="font-size:130%;">In IronPython, str is unicode</span><br /><br /><span style="font-size:100%;">Now, it may be true that Python plans to drop the current behavior, make str unicode, and add a separate type specifically for dealing with byte strings (See <a href="http://www.python.org/dev/peps/pep-0358/">PEP 358</a>). However, that is not the case yet, and jumping the gun and making str and unicode the same type is an absolutely incorrect non-solution. This is not just a matter of taste, but a situation where IronPython is absolutely wrong. I can make two arguments against this.<br /><br /><span style="font-weight: bold;">IronPython does not encode or decode between str and unicode</span></span></div></div><br />One of the most important issues about dealing with unicode is the difference between unicode or unicode strings of text and encoding strings of text or bytestreams containing encoded text, which may be decoded into understandable unicode (Joel has <a href="http://www.joelonsoftware.com/articles/Unicode.html">covered all this</a>). IronPython implicitly can not do this. A str with a non-ASCII "byte" cannot be encoded by Python, if you don't tell it the encoding being used. This is no flaw, it is the law. IronPython, having no str type, effectively, just assumes the bytes over 128 are taken as the corresponding codepoints. <span style="font-weight: bold;">There is no encoding anywhere, in which this is the correct behavior.</span> That's right. They just give you a known bad result, and let it go.<br /><br /><span style="font-weight: bold;">When There Is No Bytestring, You Have to Look Elsewhere</span><br /><br />So what happens when you truly need to work with byte strings in IronPython, which pretends byte strings are unicode strings? Well, you have to look elsewhere. Of course, the entire .Net API is at your finger tips, so look no further than System.Byte and System.Array, of course. Sounds easy, but the danger here should be obvious. <span style="font-weight: bold;">Any Python code assuming, correctly, that str is a byte string type, is subject to implosion within IronPython and any IronPython code "properly" handling byte data simply can't import outside IronPython at all.<br /></span><br /><span style="font-size:130%;">Language and Library<br /><br /><span style="font-size:100%;">Does syntax alone make a language? Maybe one day it could, but those days died out. Python is far more than its clean, beautiful syntax. The libraries that come in the standard library provide even more value. As a foundation for all the software built on top, these packages are fundamental to the success of Python. Yes, your code looks beautiful all on its own, but all on its own it does not have an <a href="http://docs.python.org/lib/module-sqlite3.html">embedded database</a>, <a href="http://docs.python.org/lib/module-ConfigParser.html">configuration parser</a>, and <a href="http://docs.python.org/lib/module-smtpd.html">mail</a> and  <a href="http://docs.python.org/lib/module-SimpleHTTPServer.html">web</a> servers. Right there you have a basis for a huge number of applications, without even leaving the language's vanilla installation.<br /><br />IronPython does not include any of these, so if you write software using them, don't expect them to run on the .Net runtime, just because IronPython claims compatibility. You can probably access all the same facilities, but you have to do so through the .Net APIs of similar facilities. I am not even sure that the same facilities are provided there. The sad fact about a lot of this, is that many fo the libraries not included in IronPython actually work perfectly, if they would include them in the distribution, <span style="font-style: italic;">without change</span>.<br /><br />Because of this, we have to resort to things I consider terrible, like two different Python scripts, both doing some basic HTTP downloads, and both being completely incompatible because they rely on entirely different APIs: IronPython through .Net APIs and the real Python through <a href="http://docs.python.org/lib/module-urllib2.html">urllib2</a> or <a href="http://docs.python.org/lib/module-httplib.html">httplib</a>.<br /></span><br />Conclusion</span><br /><br />IronPython takes the syntax, but stops short of the language. The problem is one for both Python and IronPython lovers. In Python land, we're seeing what appears to be an influx of interest from the IronPython (also, via Silverlight) world, but all those new developers are creating <span style="font-style: italic;">completely incompatible code</span>. IronPython advocates, on the other hand, look silly to think they are promoting the Python language, and are completely missing out on hundreds of great libraries, years of built up community, and synergy that isn't just a buzzword.<br /><br />I really want this to all work out. IronPython, can we get along?